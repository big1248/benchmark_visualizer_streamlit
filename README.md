# LLM 벤치마크 시각화 도구

LLM 모델의 벤치마크 결과를 다양한 관점에서 분석하고 시각화하는 대화형 대시보드입니다.

## 주요 기능

### 1. 전체 요약 📊
- 전체 통계 요약 (총 문제 수, 정확도, 모델 수, 테스트 수)
- 모델별 정확도 요약 테이블
- 정확도 비교 막대 그래프

### 2. 모델별 비교 🏆
- 모델별 테스트별 정확도 히트맵
- 정확도 vs 처리속도 산점도
- 모델별 정답률 분포 박스플롯
- 상세도별 성능 비교 (detailed vs summary)

### 3. 테스트별 분석 📚
- 특정 테스트 선택 및 상세 분석
- 모델별 성능 비교
- 과목별 성능 추이 (과목 정보가 있는 경우)

### 4. 법령/비법령 분석 ⚖️
- 법령/비법령 문제 분포
- 법령/비법령별 정확도 비교
- 모델별 법령/비법령 성능 비교
- 테스트별 법령/비법령 성능 비교

### 5. 과목별 분석 📖
- 과목별 전체 통계
- 과목별 정확도 막대 그래프
- 모델별 과목별 성능 히트맵
- 특정 과목 선택 및 상세 분석

### 6. 연도별 분석 📅 (NEW!)
- 연도별 정확도 추이 분석
- 모델별 연도별 성능 비교
- 테스트별 연도별 성능 추이
- 특정 연도 상세 분석
- 연도×모델 성능 히트맵

## 화면 설정

### 폰트 크기 조절 🎨 (NEW!)
사이드바에서 4단계 폰트 크기 조절 가능:
- 작게 (14px 기본)
- 보통 (16px 기본)
- 크게 (18px 기본) - 기본값
- 매우 크게 (20px 기본)

**풀스크린 최적화**: 큰 모니터에서도 편하게 볼 수 있도록 기본 폰트가 크게 설정되어 있습니다.

## 필터링 기능

사이드바에서 다음 조건으로 데이터를 필터링할 수 있습니다:
- 테스트명 (산업안전기사, 방재기사, 건설안전기사 등)
- 모델 (Claude-3.5-Sonnet, GPT-4o 등)
- 상세도 (detailed, summary)
- 프롬프팅 방식 (no_prompting 등)
- 법령 구분 (전체, 법령, 비법령)

## 설치 방법

### 1. 필요한 패키지 설치

```bash
pip install -r requirements.txt
```

### 2. 실행

```bash
streamlit run llm_benchmark_visualizer.py
```

## 데이터 형식

### Testset 파일 형식 (testset_[테스트명].csv)
```
Test Name,Year,Session,Subject,Number,Question,image,law,Option 1,Option 2,Option 3,Option 4,Answer,제외 여부,법령 이름
산업안전기사,2003,1,안전관리론,7,...
```

### 결과 파일 형식 ([모델명]_[상세도]_[프롬프팅]_[테스트명].csv)
```
Test Name,Year,Session,Subject,Number,...,모델명,총문제수,정답수,추출실패,정확도(%),총소요시간(초),문제당평균시간(초),입력토큰,출력토큰,총토큰,비용수준,예측답,정답여부,모델응답
산업안전기사,2003,1,안전관리론,7,...,Claude 3.5 Sonnet,282,191,0,67.73,...
```

## 파일명 규칙

- **Testset 파일**: `testset_[테스트명].csv`
  - 예: `testset_산업안전기사.csv`, `testset_방재기사.csv`

- **결과 파일**: `[모델명]_[상세도]_[프롬프팅방식]_[테스트명].csv`
  - 예: `Claude-3-5-Sonnet_detailed_no_prompting_산업안전기사.csv`
  - 예: `GPT-4o_summary_no_prompting_방재기사.csv`

## 사용 예시

1. **특정 모델 비교**
   - 사이드바에서 원하는 모델들만 선택
   - "모델별 비교" 탭에서 성능 비교

2. **법령 문제만 분석**
   - 법령 구분 필터에서 "법령" 선택
   - 각 탭에서 법령 문제만 분석

3. **특정 테스트의 과목별 분석**
   - 테스트명 필터에서 원하는 테스트 선택
   - "과목별 분석" 탭에서 상세 분석

4. **모델 성능 종합 비교**
   - 모든 필터를 "전체"로 설정
   - "전체 요약" 또는 "모델별 비교" 탭 확인

## 주요 시각화 차트

- **막대 그래프**: 정확도 비교
- **히트맵**: 모델×테스트, 모델×과목 성능 매트릭스
- **산점도**: 정확도 vs 처리속도
- **박스플롯**: 정답률 분포
- **파이 차트**: 법령/비법령 비율
- **라인 차트**: 과목별 성능 추이

## 데이터 디렉토리 설정

기본값은 `/mnt/project`이며, 사이드바에서 데이터가 있는 디렉토리 경로를 변경할 수 있습니다.

## 특징

- **반응형 레이아웃**: 화면 크기에 따라 자동 조정
- **인터랙티브 차트**: Plotly를 사용한 확대/축소, 호버 정보 표시
- **실시간 필터링**: 필터 변경 시 즉시 반영
- **데이터 캐싱**: 빠른 로딩 속도
- **다중 조건 필터**: 여러 조건을 동시에 적용 가능

## 문제 해결

### 데이터가 로드되지 않는 경우
1. 데이터 디렉토리 경로 확인
2. CSV 파일명이 규칙에 맞는지 확인
3. 파일 인코딩 확인 (UTF-8 또는 CP949)

### 차트가 표시되지 않는 경우
1. 필터 설정으로 데이터가 모두 제외되었는지 확인
2. 해당 데이터에 필요한 컬럼이 있는지 확인

## 기술 스택

- **Streamlit**: 웹 대시보드 프레임워크
- **Pandas**: 데이터 처리
- **Plotly**: 인터랙티브 시각화
- **NumPy**: 수치 계산

## 라이센스

MIT License

## 개발자

고급 LLM 벤치마크 분석을 위한 시각화 도구
